(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f165b0d"],{"058a":function(e,t,r){"use strict";r.d(t,"h",(function(){return s})),r.d(t,"j",(function(){return a})),r.d(t,"k",(function(){return i})),r.d(t,"l",(function(){return o})),r.d(t,"i",(function(){return c})),r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"g",(function(){return d})),r.d(t,"f",(function(){return f})),r.d(t,"c",(function(){return p})),r.d(t,"e",(function(){return g})),r.d(t,"b",(function(){return b}));var n="http://60qb8761xi36.vicp.fun",s=n+"/api/users/getAll",a=n+"/api/users/register",i=n+"/api/users/register_application/approve",o=n+"/api/users",c=n+"/api/users/login",l=n+"/api/questions/categories",u=n+"/api/records/user",d=n+"/api/users/register_application",f=n+"/api/records",p=n+"/api/questions/batch",g=n+"/api/questions/category",b=n+"/api/questions/category"},4468:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[e.listLoading?r("div",{staticClass:"loading-overlay"},[e._m(0)]):e._e(),e.listLoading?e._e():r("el-table",{attrs:{data:e.users,border:"",fit:"","highlight-current-row":"",title:"用戶管理"}},[r("el-table-column",{attrs:{label:"用戶管理名單",align:"center"}},[r("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}],null,!1,2507105690)}),r("el-table-column",{attrs:{label:"帳號"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.account)+" ")]}}],null,!1,4056155100)}),r("el-table-column",{attrs:{label:"角色",width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.role))])]}}],null,!1,183034866)}),r("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(r){return e.handleEditUser(t.row)}}}),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return e.confirmDeleteUser(t.row)}}})]}}],null,!1,2829480923)})],1)],1),r("el-button",{staticClass:"floating-button",attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.handleAddUser}}),r("el-dialog",{attrs:{title:"新增用戶",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{attrs:{model:e.newUser,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{model:{value:e.newUser.name,callback:function(t){e.$set(e.newUser,"name",t)},expression:"newUser.name"}})],1),r("el-form-item",{attrs:{label:"帳號"}},[r("el-input",{model:{value:e.newUser.account,callback:function(t){e.$set(e.newUser,"account",t)},expression:"newUser.account"}})],1),r("el-form-item",{attrs:{label:"角色"}},[r("el-select",{attrs:{placeholder:"請選擇角色"},model:{value:e.newUser.role,callback:function(t){e.$set(e.newUser,"role",t)},expression:"newUser.role"}},[r("el-option",{attrs:{label:"管理員",value:"admin"}}),r("el-option",{attrs:{label:"編輯者",value:"editor"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("確定")])],1)],1),r("el-dialog",{attrs:{title:"編輯用戶",visible:e.editDialogVisible,width:"80%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[r("el-form",{attrs:{model:e.editUser,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{model:{value:e.editUser.name,callback:function(t){e.$set(e.editUser,"name",t)},expression:"editUser.name"}})],1),r("el-form-item",{attrs:{label:"帳號"}},[r("el-input",{model:{value:e.editUser.account,callback:function(t){e.$set(e.editUser,"account",t)},expression:"editUser.account"}})],1),r("el-form-item",{attrs:{label:"角色"}},[r("el-select",{attrs:{placeholder:"請選擇角色"},model:{value:e.editUser.role,callback:function(t){e.$set(e.editUser,"role",t)},expression:"editUser.role"}},[r("el-option",{attrs:{label:"管理員",value:"admin"}}),r("el-option",{attrs:{label:"編輯者",value:"editor"}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("確定")])],1)],1),r("el-dialog",{attrs:{title:"確認刪除",visible:e.deleteDialogVisible},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[r("span",[e._v("您確定要刪除此用戶嗎？")]),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteUser(e.deleteUserTarget)}}},[e._v("刪除")])],1)]),e.registrationListLoading?r("div",{staticClass:"loading-overlay"},[e._m(1)]):e._e(),e.registrationListLoading?e._e():r("el-table",{attrs:{data:e.registrationList,border:"",fit:"","highlight-current-row":""}},[r("el-table-column",{attrs:{label:"用戶註冊名單",align:"center"}},[r("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}],null,!1,2507105690)}),r("el-table-column",{attrs:{label:"帳號"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.account)+" ")]}}],null,!1,4056155100)}),r("el-table-column",{attrs:{label:"申請時間",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.createTime)+" ")]}}],null,!1,4260517292)}),r("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-check"},on:{click:function(r){return e.confirmRegistration(t.row)}}}),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(r){return e.deleteRegistration(t.row.user_registration_id)}}})]}}],null,!1,1565610459)})],1)],1)],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loading-content"},[r("img",{staticClass:"loading-gif",attrs:{src:"https://media.tenor.com/fSsxftCb8w0AAAAi/pikachu-running.gif",alt:"Loading"}}),r("p",{staticClass:"loading-text"},[e._v("載入中..")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loading-content"},[r("img",{staticClass:"loading-gif",attrs:{src:"https://media.tenor.com/fSsxftCb8w0AAAAi/pikachu-running.gif",alt:"Loading"}}),r("p",{staticClass:"loading-text"},[e._v("載入中..")])])}],a=r("5530"),i=r("c7eb"),o=r("1da1"),c=(r("99af"),r("4de4"),r("b0c0"),r("e9c4"),r("d3b7"),r("058a")),l={data:function(){return{users:[],listLoading:!1,dialogVisible:!1,editDialogVisible:!1,deleteDialogVisible:!1,newUser:{userId:"",name:"",account:"",role:""},editUser:{userId:"",name:"",account:"",role:""},deleteUserTarget:null,registrationList:[],registrationListLoading:!1}},created:function(){this.fetchUsers(),this.fetchRegistrationList()},methods:{fetchUsers:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var r,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!0,t.prev=1,t.next=4,fetch(c["h"]);case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,1===n.code&&n.data?(e.users=n.data,console.log("獲取用戶資料成功:",e.users)):(console.error("獲取用戶資料失敗:",n.msg),e.users=[]),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](1),console.error("獲取用戶資料時發生錯誤:",t.t0),e.users=[];case 15:return t.prev=15,e.listLoading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,11,15,18]])})))()},fetchRegistrationList:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var r,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(c["g"],"/getAll"));case 3:return r=t.sent,t.next=6,r.json();case 6:n=t.sent,1===n.code&&n.data?(e.registrationList=n.data,console.log("獲取註冊申請列表成功:",e.registrationList)):(console.error("獲取註冊申請列表失敗:",n.msg),e.registrationList=[]),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("獲取註冊申請列表時發生錯誤:",t.t0),e.registrationList=[];case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},deleteUser:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function r(){var n,s;return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("deleteUser",e.userId),r.prev=1,r.next=4,fetch("".concat(c["l"],"/").concat(e.userId),{method:"DELETE"});case 4:return n=r.sent,r.next=7,n.json();case 7:if(s=r.sent,1!==s.code){r.next=13;break}t.users=t.users.filter((function(t){return t.userId!==e.userId})),t.$message({type:"success",message:"用戶已成功刪除"}),r.next=14;break;case 13:throw new Error(s.msg||"刪除用戶失敗");case 14:r.next=20;break;case 16:r.prev=16,r.t0=r["catch"](1),console.error("刪除用戶時發生錯誤:",r.t0),t.$message({type:"error",message:"刪除用戶失敗"});case 20:return r.prev=20,t.deleteDialogVisible=!1,r.finish(20);case 23:case"end":return r.stop()}}),r,null,[[1,16,20,23]])})))()},confirmDeleteUser:function(e){this.deleteUserTarget=e,this.deleteDialogVisible=!0},handleAddUser:function(){this.dialogVisible=!0},addUser:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var r,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(c["j"],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.newUser.name,account:e.newUser.account,password:"111111",role:e.newUser.role})});case 3:return r=t.sent,t.next=6,r.json();case 6:if(n=t.sent,1!==n.code){t.next=13;break}e.$message({type:"success",message:"用戶新增成功"}),e.dialogVisible=!1,e.fetchUsers(),t.next=14;break;case 13:throw new Error(n.msg||"新增用戶失敗");case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),console.error("新增用戶時發生錯誤:",t.t0),e.$message({type:"error",message:"無法連接到伺服器，請檢查伺服器是否正在運行"});case 20:e.newUser={name:"",account:"",role:""};case 21:case"end":return t.stop()}}),t,null,[[0,16]])})))()},handleEditUser:function(e){this.editUser=Object(a["a"])({},e),this.editDialogVisible=!0},updateUser:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var r,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(c["l"],"/").concat(e.editUser.userId),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.editUser.userId,name:e.editUser.name,account:e.editUser.account,role:e.editUser.role})});case 3:return r=t.sent,t.next=6,r.json();case 6:if(n=t.sent,1!==n.code){t.next=13;break}e.$message({type:"success",message:"用戶更新成功"}),e.editDialogVisible=!1,e.fetchUsers(),t.next=14;break;case 13:throw new Error(n.msg||"更新用戶失敗");case 14:t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),console.error("更新用戶時發生錯誤:",t.t0),e.$message({type:"error",message:"無法連接到伺服器，請檢查伺服器是否正在運行"});case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))()},confirmRegistration:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function r(){var n,s;return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("".concat(c["k"],"/").concat(e.user_registration_id),{method:"POST"});case 3:return n=r.sent,r.next=6,n.json();case 6:if(s=r.sent,1!==s.code){r.next=13;break}t.$message({type:"success",message:"用戶註冊申請已確認"}),t.fetchRegistrationList(),t.fetchUsers(),r.next=14;break;case 13:throw new Error(s.msg||"確認用戶註冊申請失敗");case 14:r.next=21;break;case 16:r.prev=16,r.t0=r["catch"](0),console.error("確認用戶註冊申請時發生錯誤:",r.t0),console.log(e.user_registration_id),t.$message({type:"error",message:"無法連接到伺服器，請檢查伺服器是否正在運行"});case 21:case"end":return r.stop()}}),r,null,[[0,16]])})))()},deleteRegistration:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function r(){var n,s;return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("".concat(c["g"],"/").concat(e),{method:"DELETE"});case 3:return n=r.sent,r.next=6,n.json();case 6:if(s=r.sent,1===s.code){r.next=9;break}throw new Error(s.msg||"刪除註冊申請失敗");case 9:return r.next=11,t.fetchRegistrationList();case 11:r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),console.error("刪除註冊申請時發生錯誤:",r.t0),t.$message({type:"error",message:"刪除註冊申請失敗"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()}}},u=l,d=(r("d170"),r("2877")),f=Object(d["a"])(u,n,s,!1,null,"65349563",null);t["default"]=f.exports},b8d1:function(e,t,r){},d170:function(e,t,r){"use strict";r("b8d1")},e9c4:function(e,t,r){var n=r("23e7"),s=r("d066"),a=r("d039"),i=s("JSON","stringify"),o=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,u=function(e,t,r){var n=r.charAt(t-1),s=r.charAt(t+1);return c.test(e)&&!l.test(s)||l.test(e)&&!c.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},d=a((function(){return'"\\udf06\\ud834"'!==i("\udf06\ud834")||'"\\udead"'!==i("\udead")}));i&&n({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,r){var n=i.apply(null,arguments);return"string"==typeof n?n.replace(o,u):n}})}}]);